mixin dataRow(field, title)
  if data[field]
    tr: td(colspan='2' height='15')
    tr
      th(width='35%' valign='top' align='left')
        +text(16, 500, '#6f777b')= title
      td(width='65%' valign='top')
        +text= data[field]
    tr: td(colspan='2' height='15')
    tr: td(colspan='2' height='1' bgcolor='#6f777b')
    
mixin sectionHeader(title)
  tr: td(colspan='2' height='20')
  tr: td(colspan='2')
    h2(style='margin:0;padding:0;')
      +text(19, 700)= title
  tr: td(colspan='2' height='10')
  tr: td(colspan='2' height='1' bgcolor='#6f777b')

//- custom reason overrides
if data['enquiry-reason-other']
  - data['enquiry-reason'] = data['enquiry-reason-other']
if data['org-type-other']
  - data['org-type'] = data['org-type-other']

if data
  tr: td
    +tbl
      +sectionHeader(t('pages.confirm.step-titles.topic'))
      +dataRow('enquiry-reason', t('pages.confirm.table-headers.topic'))
  if data['exported-before']
    tr: td
      +tbl
        +sectionHeader(t('pages.confirm.step-titles.exported-before'))
        +dataRow('exported-before', t('pages.confirm.table-headers.exported-before'))
  tr: td
    +tbl
      +sectionHeader(t('pages.confirm.step-titles.personal-details'))
      +dataRow('fullname', t('pages.confirm.table-headers.fullname'))
      +dataRow('email', t('pages.confirm.table-headers.email'))
      +dataRow('phone', t('pages.confirm.table-headers.phone'))
  if data['org-type']
    tr: td
      +tbl
        +sectionHeader(t('pages.confirm.step-titles.type'))
        +dataRow('org-type', t('pages.confirm.table-headers.org-type'))
  if data['country']
    tr: td
      +tbl
        +sectionHeader(t('pages.confirm.step-titles.company-location'))
        +dataRow('country', t('pages.confirm.table-headers.country'))
        +dataRow('uk-postcode', t('pages.confirm.table-headers.uk-postcode'))
        +dataRow('company-number', t('pages.confirm.table-headers.company-number'))
  if data['org-name']
    tr: td
      +tbl
        +sectionHeader(t('pages.confirm.step-titles.company-details'))
        +dataRow('org-name', t('pages.confirm.table-headers.org-name'))
        +dataRow('sector', t('pages.confirm.table-headers.sector'))
        +dataRow('annual-turnover', t('pages.confirm.table-headers.annual-turnover'))
        +dataRow('no-employees', t('pages.confirm.table-headers.no-employees'))
  tr: td
    +tbl
      +sectionHeader(t('pages.confirm.step-titles.enquiry-description'))
      +dataRow('enquiry-description', t('pages.confirm.table-headers.description'))
tr: td
  +tbl
    +sectionHeader(t('fields.bank-referrer.heading'))
    tr: td(colspan='2' height='15')
    tr
      th(width='35%' valign='top' align='left')
        +text(16, 500, '#6f777b')= t('emails.bank-referrer.field-label')
      td(width='65%' valign='top')
        +text
          if data['bank-referrer'] === 'Yes'
            = t('emails.bank-referrer.yes')
          else
            = t('emails.bank-referrer.no')

    tr: td(colspan='2' height='15')
    tr: td(colspan='2' height='1' bgcolor='#6f777b')

    if data['bank-referrer'] === 'Yes'
      tr: td(colspan='2' height='15')
      tr
        th(width='35%' valign='top' align='left')
          +text(16, 500, '#6f777b')= t('emails.bank-referrer.option-label')
        td(width='65%' valign='top')
          +text= data['bank-referrer-name']
      tr: td(colspan='2' height='15')
      tr: td(colspan='2' height='1' bgcolor='#6f777b')
tr: td
  +tbl
    +sectionHeader(t('fields.data-protection.title'))
    tr: td(colspan='2' height='15')
    tr
      th(width='35%' valign='top' align='left')
        +text(16, 500, '#6f777b')= t('emails.data-protection.table-header')
      td(width='65%' valign='top')
        +text
          if data['data-protection']
            = t('emails.data-protection.yes')
          else
            = t('emails.data-protection.no')
    tr: td(colspan='2' height='15')
    tr: td(colspan='2' height='1' bgcolor='#6f777b')
